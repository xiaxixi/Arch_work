(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],u=0,d=[];u<o.length;u++)i=o[u],s[i]&&d.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},r=[];function i(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-2d0cb782":"9330c45b"}[t]+".js"}function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise(function(e,n){a=s[t]=[e,n]});e.push(a[2]=n);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(t),r=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");i.type=n,i.request=r,a[1](i)}s[t]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("9e74"),s=a.n(n);s.a},"0538":function(t,e,a){"use strict";var n=a("0b4b"),s=a.n(n);s.a},"0957":function(t,e,a){"use strict";var n=a("5789"),s=a.n(n);s.a},"0b4b":function(t,e,a){},"0eb0":function(t,e,a){"use strict";var n=a("d096"),s=a.n(n);s.a},2027:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("7364"),a("dac5"),a("6e26"),a("9604"),a("df67");var n,s,r,i,o,c,l,u,h,d=a("6e6d"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Tabbar"),a("router-view")],1)},p=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("van-tabbar",{attrs:{"active-color":"#07c160"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"logistics",to:"/home"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"goods-collect-o",to:"/mail"}},[t._v("商旅")]),a("van-tabbar-item",{attrs:{icon:"notes-o",to:"/announcement"}},[t._v("公告")]),a("van-tabbar-item",{attrs:{icon:"pending-payment",to:"/order"}},[t._v("订单")]),a("van-tabbar-item",{attrs:{icon:"contact",to:"/about"}},[t._v("我的")])],1):t._e()},f=[],C=a("cb1d"),b=(a("684d"),a("0f01")),g=(a("e587"),a("4357")),N={name:"Tabbar",components:(n={},Object(C["a"])(n,g["a"].name,g["a"]),Object(C["a"])(n,b["a"].name,b["a"]),n),mounted:function(){"home"===this.$route.name&&(this.active=0),"mail"===this.$route.name&&(this.active=1),"new"===this.$route.name&&(this.active=2),"order"===this.$route.name&&(this.active=3),"about"===this.$route.name&&(this.active=4),"login"===this.$route.name&&(this.show=!1),"register"===this.$route.name&&(this.show=!1),"search"===this.$route.name&&(this.show=!1)},watch:{$route:function(t){switch(t.name){case"login":this.show=!1;break;case"register":this.show=!1;break;case"search":this.show=!1;break;default:this.show=!0;break}}},data:function(){return{active:null,show:!0}}},Y=N,w=a("17cc"),A=Object(w["a"])(Y,v,f,!1,null,null,null),_=A.exports,k={name:"app",components:{Tabbar:_}},E=k,O=(a("034f"),Object(w["a"])(E,m,p,!1,null,null,null)),j=O.exports,y=a("1e6f"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("van-nav-bar",{attrs:{title:"首页"}}),a("h3",{staticClass:"h-title"},[t._v("车票查询")]),a("div",{staticClass:"station-box"},[a("van-button",{staticClass:"son-box",attrs:{size:"normal"},on:{click:function(e){t.startshow=!0}}},[t._v(t._s(t.startValue))]),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.startshow,callback:function(e){t.startshow=e},expression:"startshow"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.onStartConfirm,cancel:t.onCancel}})],1),a("van-icon",{attrs:{name:"exchange",size:"30px",color:"#42b983"},on:{click:t.onExchange}}),a("van-button",{staticClass:"son-box",attrs:{size:"normal"},on:{click:function(e){t.endshow=!0}}},[t._v(t._s(t.endValue))]),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.endshow,callback:function(e){t.endshow=e},expression:"endshow"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.onEndConfirm,cancel:t.onCancel}})],1)],1),a("div",{staticClass:"date-box"},[a("p",[t._v("出发日期")]),a("datepicker",{staticClass:"date-picker",attrs:{format:"yyyy-MM-dd",placeholder:"请选择出发日期",disabledDates:t.disabledDates},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("van-button",{staticClass:"search-btn",attrs:{plain:"",hairline:"",type:"primary"},on:{click:t.onSearch}},[t._v("查询车票")])],1)},x=[],D=(a("f763"),a("1cc4"),a("94da")),T=(a("1569"),a("573a")),S=(a("1979"),a("b705")),U=(a("3e1f"),a("154c")),B=(a("7e97"),a("c15d")),L=(a("c527"),a("0b06")),$=a("2cb6"),V={name:"Home",components:(s={},Object(C["a"])(s,L["a"].name,L["a"]),Object(C["a"])(s,B["a"].name,B["a"]),Object(C["a"])(s,U["a"].name,U["a"]),Object(C["a"])(s,S["a"].name,S["a"]),Object(C["a"])(s,T["a"].name,T["a"]),Object(C["a"])(s,"Datepicker",$["a"]),Object(C["a"])(s,D["a"].name,D["a"]),s),data:function(){return{startshow:!1,startValue:"起始站",start:"",endshow:!1,endValue:"终点站",end:"",tmp:"",date:"",disabledDates:{to:new Date},columns:["杭州东","上海南","成都","宁波"],values:["HGH","SNH","CDW","NGH"]}},methods:{onChange:function(t,e,a){window.console.log("当前值：".concat(e,", 当前索引：").concat(a))},onStartConfirm:function(t,e){this.startValue=t,this.startshow=!1,this.start=this.values[e]},onEndConfirm:function(t,e){this.endValue=t,this.endshow=!1,this.end=this.values[e]},onCancel:function(){this.startshow=!1,this.endshow=!1},onExchange:function(){this.tmp=this.startValue,this.startValue=this.endValue,this.endValue=this.tmp,"起始站"!==this.startValue&&"终点站"!==this.startValue||(this.startValue="起始站"),"起始站"!==this.endValue&&"终点站"!==this.endValue||(this.endValue="终点站")},onSearch:function(){"起始站"!==this.startValue&&"终点站"!==this.endValue&&this.startValue!==this.endValue&&this.date?this.$router.push({name:"search",query:{start:this.start,end:this.end,date:this.date.toISOString().slice(0,10)}}):D["a"].fail("信息无效")}}},I=V,R=(a("89f1"),Object(w["a"])(I,M,x,!1,null,null,null)),J=R.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("van-nav-bar",{attrs:{title:t.title,"left-arrow":""},on:{"click-left":t.onClickLeft}}),t._l(t.fakedata,function(e){return a("ticket-item",{key:e.id,attrs:{id:e.id,startDate:e.startDate,endDate:e.endDate,count:e.count,start:t.data.map[t.start],end:t.data.map[t.end]}})})],2)},F=[],Q=a("2427"),H=a.n(Q),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ticket-item"},[a("div",{staticClass:"ti-row"},[a("div",{staticClass:"col-id"},[t._v(t._s(t.id))]),a("div",{staticClass:"col-start"},[a("van-tag",{attrs:{color:"#42b983"}},[t._v("始")]),t._v("\n      "+t._s(t.start)+"\n    ")],1),a("div",{staticClass:"col-hr"},[t._v("--------")]),a("div",{staticClass:"col-end"},[a("van-tag",{attrs:{type:"danger"}},[t._v("终")]),t._v("\n      "+t._s(t.end)+"\n    ")],1)]),a("div",{staticClass:"ti-row"},[a("div",{staticClass:"col-id"}),a("div",{staticClass:"col-startDate"},[t._v(t._s(t.startDate))]),a("div",{staticClass:"col-hr"}),a("div",{staticClass:"col-endDate"},[t._v(t._s(t.endDate))])]),a("div",{staticClass:"ti-row"},[a("div",{staticClass:"col-seat"},[t._v("商务："+t._s(t.count[0]))]),a("div",{staticClass:"col-seat"},[t._v("一等："+t._s(t.count[1]))]),a("div",{staticClass:"col-seat"},[t._v("二等："+t._s(t.count[2]))]),a("div",{staticClass:"col-seat"},[t._v("无座："+t._s(t.count[3]))])])])},q=[],z=(a("cba2"),a("e784")),P={name:"TicketItem",components:Object(C["a"])({},z["a"].name,z["a"]),props:{id:String,start:String,end:String,startDate:String,endDate:String,count:Array}},G=P,X=(a("0957"),Object(w["a"])(G,W,q,!1,null,null,null)),Z=X.exports,tt={name:"search",components:(r={},Object(C["a"])(r,L["a"].name,L["a"]),Object(C["a"])(r,"TicketItem",Z),Object(C["a"])(r,D["a"].name,D["a"]),r),data:function(){return{title:"",start:"",end:"",data:{},fakedata:[{id:"G1866",startDate:"08:11",endDate:"11:11",count:[22,12,34,2]},{id:"G1226",startDate:"09:11",endDate:"12:11",count:[32,23,4,4]},{id:"K1233",startDate:"09:22",endDate:"12:22",count:[56,9,24,22]},{id:"G6866",startDate:"09:43",endDate:"11:43",count:[17,67,65,14]},{id:"G5866",startDate:"10:11",endDate:"12:11",count:[52,42,23,5]},{id:"K1866",startDate:"08:11",endDate:"11:11",count:[2,24,51,8]},{id:"G9026",startDate:"08:11",endDate:"11:11",count:[92,54,24,19]},{id:"G1236",startDate:"08:11",endDate:"11:11",count:[21,74,83,32]},{id:"G3446",startDate:"08:11",endDate:"11:11",count:[16,23,12,12]}]}},mounted:function(){this.query(this.$route.query.start,this.$route.query.end,this.$route.query.date),this.start=this.$route.query.start,this.end=this.$route.query.end},methods:{onClickLeft:function(){this.$router.push("home")},query:function(t,e,a){var n=this;D["a"].loading({mask:!0,duration:0,forbidClick:!0,loadingType:"spinner",message:"查询中..."});var s="https://cors-anywhere.herokuapp.com/".concat("https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=",a,"&leftTicketDTO.from_station=").concat(t,"&leftTicketDTO.to_station=").concat(e,"&purpose_codes=ADULT");H.a.get(s).then(function(t){return t.data}).then(function(t){window.console.log(t),n.data=t.data,n.title=t.data.map[n.start]+" <> "+t.data.map[n.end],D["a"].clear()}).catch(function(){D["a"].clear()})}}},et=tt,at=(a("0538"),Object(w["a"])(et,K,F,!1,null,null,null)),nt=at.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("van-nav-bar",{attrs:{title:"我的"}}),a("van-cell",{attrs:{value:"个人信息"}}),a("van-cell",{staticClass:"son-cell"},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("用户名：")]),a("span",{staticClass:"custom-text"},[t._v(t._s(this.user.username))]),a("van-tag",{staticClass:"role-tag",attrs:{plain:"",color:"#42b983"}},[t._v(t._s(this.columns[this.user.role]))])],1)],2),a("van-cell",{staticClass:"son-cell"},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("手机号：")]),a("span",{staticClass:"custom-text"},[t._v(t._s(this.user.phone_number))])])],2),a("van-cell",{staticClass:"son-cell"},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("邮箱：")]),a("span",{staticClass:"custom-text"},[t._v(t._s(this.user.email))])])],2),a("van-cell",{staticClass:"son-cell"},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("身份证：")]),a("span",{staticClass:"custom-text"},[t._v(t._s(this.user.id_no))])])],2),a("van-cell",{staticClass:"parent-cell",attrs:{value:"帮助"}}),a("van-cell",{staticClass:"son-cell",attrs:{title:"出行向导","is-link":""}}),a("van-cell",{staticClass:"son-cell",attrs:{title:"温馨服务","is-link":""}}),a("van-cell",{staticClass:"son-cell",attrs:{title:"信息服务","is-link":""}}),a("van-cell",{staticClass:"parent-cell",attrs:{value:"其他"}}),a("van-cell",{staticClass:"son-cell",attrs:{title:"修改密码","is-link":""}}),a("van-cell",{staticClass:"son-cell",attrs:{title:"添加联系人","is-link":""}}),a("van-cell",{staticClass:"son-cell",attrs:{"is-link":""}},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v("关于")]),a("van-tag",{attrs:{round:"",type:"danger"}},[t._v("v 2.0")])],1)],2),a("div",{staticClass:"logout-btn-box"},[a("van-button",{staticClass:"logout-btn",attrs:{type:"primary"},on:{click:t.logout}},[t._v("注销")])],1)],1)},rt=[],it=(a("a138"),a("566a")),ot=(a("0d60"),a("9042")),ct=a("591a"),lt={name:"about",components:(i={},Object(C["a"])(i,L["a"].name,L["a"]),Object(C["a"])(i,ot["a"].name,ot["a"]),Object(C["a"])(i,it["a"].name,it["a"]),Object(C["a"])(i,z["a"].name,z["a"]),Object(C["a"])(i,U["a"].name,U["a"]),Object(C["a"])(i,D["a"].name,D["a"]),i),computed:Object(ct["b"])(["user"]),data:function(){return{columns:["成人","儿童","学生","残军"]}},methods:{logout:function(){this.$router.push("login"),this.$store.dispatch("deleteUserAction"),D["a"].success("注销成功")}}},ut=lt,ht=(a("88d0"),Object(w["a"])(ut,st,rt,!1,null,null,null)),dt=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("img",{staticClass:"login-logo",attrs:{src:a("f5ed")}}),n("h2",{staticClass:"login-title"},[t._v("欢迎登录")]),n("div",{staticClass:"login-box"},[n("van-cell-group",[n("van-field",{attrs:{clearable:"",label:"用户名","right-icon":"contact",placeholder:"字母、数字或'_'，6-30位","error-message":t.nameErrMsg},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"password",clearable:"",label:"密码","right-icon":"edit",placeholder:"6-30位","error-message":t.pwdErrMsg1},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("van-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")]),n("van-button",{staticClass:"register-btn",on:{click:t.to_register}},[t._v("注册")])],1),n("van-notice-bar",{attrs:{mode:"closeable",text:"温馨提示：改订票系统每日06:00～23:00提供服务，在该系统购票、改签、和退票须不晚于开车前30分钟；办理变更到站业务时，请不晚于开车前48小时。","left-icon":"https://img.yzcdn.cn/public_files/2017/8/10/6af5b7168eed548100d9041f07b7c616.png"}})],1)},pt=[],vt=(a("34a3"),a("7c56"),a("f7ae"),a("9d5c")),ft=(a("9d65"),a("2188")),Ct={name:"login",components:(o={},Object(C["a"])(o,ot["a"].name,ot["a"]),Object(C["a"])(o,it["a"].name,it["a"]),Object(C["a"])(o,ft["a"].name,ft["a"]),Object(C["a"])(o,U["a"].name,U["a"]),Object(C["a"])(o,vt["a"].name,vt["a"]),Object(C["a"])(o,D["a"].name,D["a"]),o),data:function(){return{username:"",password:"",nameErrMsg:"",pwdErrMsg1:"",nameErr:!0,pwdErr1:!0}},methods:{login:function(){var t=this;this.isFormLegal()?(D["a"].loading({mask:!0,duration:0,forbidClick:!0,loadingType:"spinner",message:"登录中..."}),this.$axios.post("/users/login",{username:this.username,password:this.password}).then(function(t){return t.data}).then(function(e){D["a"].clear(),Object(D["a"])(e.msg),1===e.code&&(t.$store.dispatch("setUserAction",e.user),t.$router.push("/home"))})):!this.username&&this.password?D["a"].fail("请输入用户名"):!this.password&&this.username?D["a"].fail("请输入密码"):this.password||this.username?D["a"].fail("信息无效"):D["a"].fail("请输入用户名和密码")},to_register:function(){this.$router.push("register")},checks:function(){for(var t=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？%+]"),e=0;e<this.username.length;e++){if(!this.username.substr(e,1).replace(t,""))return!0;if(" "==this.username.substr(e,1))return!0}return!1},isFormLegal:function(){return this.username&&this.password&&0==this.nameErr&&0==this.pwdErr1}},watch:{username:function(){this.username.length<6?(this.nameErrMsg="用户名长度不能小于6！",this.nameErr=!0):this.username.length>30?(this.nameErrMsg="用户名长度不能大于30！",this.nameErr=!0):this.checks()?(this.nameErrMsg="非法字符！",this.nameErr=!0):(this.nameErrMsg="",this.nameErr=!1)},password:function(){this.password.length<6?(this.pwdErrMsg1="密码长度不能小于6！",this.pwdErr1=!0):this.password.length>30?(this.pwdErrMsg1="用户名长度不能大于30！",this.pwdErr1=!0):(this.pwdErrMsg1="",this.pwdErr1=!1)}}},bt=Ct,gt=(a("da41"),Object(w["a"])(bt,mt,pt,!1,null,null,null)),Nt=gt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("van-nav-bar",{attrs:{title:"注册","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("van-cell-group",[a("van-cell",{staticClass:"parent-box",attrs:{value:"基本信息"}}),a("van-field",{attrs:{label:"用户名",placeholder:"字母、数字或'_'，6-30位","error-message":t.nameErrMsg,clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("van-field",{attrs:{label:"密码",type:"password",placeholder:"6-30位","error-message":t.pwdErrMsg1,clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("van-field",{attrs:{label:"确认密码",type:"password",placeholder:"请再次输入密码","error-message":t.pwdErrMsg2,clearable:""},model:{value:t.checkpassword,callback:function(e){t.checkpassword=e},expression:"checkpassword"}})],1),a("van-cell-group",[a("van-cell",{staticClass:"parent-box parent-cell",attrs:{value:"详细信息"}}),a("van-field",{attrs:{label:"证件类型",value:"中国居民身份证",readonly:""}}),a("van-field",{attrs:{label:"证件号码",placeholder:"用于身份核验，请正确填写","error-message":t.idErrMsg,clearable:""},model:{value:t.id_no,callback:function(e){t.id_no=e},expression:"id_no"}})],1),a("van-cell-group",[a("van-cell",{staticClass:"parent-box parent-cell",attrs:{value:"联系方式"}}),a("van-field",{attrs:{label:"手机号码",type:"tel",placeholder:"请准确填写您的手机号","error-message":t.pnErrMsg,clearable:""},model:{value:t.phone_number,callback:function(e){t.phone_number=e},expression:"phone_number"}}),a("van-field",{attrs:{label:"电子邮箱",placeholder:"请准确填写邮箱地址","error-message":t.emailErrMsg,clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("van-cell-group",[a("van-cell",{staticClass:"parent-box parent-cell",attrs:{value:"附加信息"}}),a("van-field",{attrs:{label:"旅客类型",readonly:""},on:{focus:function(e){t.show=!0}},model:{value:t.role_value,callback:function(e){t.role_value=e},expression:"role_value"}},[a("van-popup",{attrs:{slot:"button",position:"bottom"},slot:"button",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1)],1)],1),a("van-button",{staticClass:"register-btn",attrs:{type:"primary"},on:{click:t.register}},[t._v("注册")])],1)},wt=[],At={name:"register",components:(c={},Object(C["a"])(c,L["a"].name,L["a"]),Object(C["a"])(c,ot["a"].name,ot["a"]),Object(C["a"])(c,it["a"].name,it["a"]),Object(C["a"])(c,ft["a"].name,ft["a"]),Object(C["a"])(c,U["a"].name,U["a"]),Object(C["a"])(c,S["a"].name,S["a"]),Object(C["a"])(c,B["a"].name,B["a"]),Object(C["a"])(c,D["a"].name,D["a"]),c),methods:{onClickLeft:function(){this.$router.push("login")},onConfirm:function(t,e){this.role_value=t,this.role=e,this.show=!1},onCancel:function(){this.show=!1},register:function(){var t=this;this.isFormLegal()?(D["a"].loading({mask:!0,duration:0,forbidClick:!0,loadingType:"spinner",message:"注册中..."}),this.$axios.post("/users/register",{username:this.username,password:this.password,email:this.email,phone_number:this.phone_number,id_no:this.id_no,role:this.role}).then(function(t){return t.data}).then(function(e){D["a"].clear(),Object(D["a"])(e.msg),1===e.code&&t.$router.push("/login")})):D["a"].fail("无效信息！")},isFormLegal:function(){return this.username&&this.password&&this.checkpassword&&this.email&&this.phone_number&&this.id_no&&this.password==this.checkpassword&&0==this.nameErr&&0==this.pwdErr1&&0==this.pwdErr2&&0==this.idErr&&0==this.pnErr&&0==this.emailErr},checks:function(t){for(var e=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？%+]"),a=0;a<t.length;a++){if(!t.substr(a,1).replace(e,""))return!0;if(" "==t.substr(a,1))return!0}return!1},checkStrNUm:function(t){for(var e=/^[0-9]+$/,a=new RegExp(e),n=0;n<t.length;n++)if(t.substr(n,1).replace(a,""))return!1;return!0},checksId:function(){return!(18!=this.id_no.length||!this.checkStrNUm(this.id_no.substr(0,17))||!this.checkStrNUm(this.id_no.substr(17,1))&&"x"!==this.id_no[17])},checksPN:function(){return!(11!=this.phone_number.length||!this.checkStrNUm(this.phone_number))},checksEmail:function(){var t=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;return!!t.test(this.email)}},data:function(){return{username:"",password:"",checkpassword:"",pwdErrMsg1:"",pwdErrMsg2:"",nameErrMsg:"",nameErr:!0,pwdErr1:!0,pwdErr2:!0,id_no:"",idErrMsg:"",idErr:!0,phone_number:"",pnErrMsg:"",pnErr:!0,email:"",emailErrMsg:"",emailErr:!0,role:0,role_value:"成人",show:!1,columns:["成人","儿童","学生","残军"]}},watch:{username:function(){this.username.length<6?(this.nameErrMsg="用户名长度不能小于6！",this.nameErr=!0):this.username.length>30?(this.nameErrMsg="用户名长度不能大于30！",this.nameErr=!0):this.checks(this.username)?(this.nameErrMsg="非法字符！",this.nameErr=!0):(this.nameErrMsg="",this.nameErr=!1)},password:function(){this.password.length<6?(this.pwdErrMsg1="密码长度不能小于6！",this.pwdErr1=!0):this.password.length>30?(this.pwdErrMsg1="用户名长度不能大于30！",this.pwdErr1=!0):(this.pwdErrMsg1="",this.pwdErr1=!1)},checkpassword:function(){this.checkpassword!==this.password?(this.pwdErrMsg2="两次密码不一致！",this.pwdErr2=!0):(this.pwdErrMsg2="",this.pwdErr2=!1)},id_no:function(){this.checksId()?(this.idErrMsg="",this.idErr=!1):(this.idErrMsg="身份证格式错误",this.idErr=!0)},phone_number:function(){this.checksPN()?(this.pnErrMsg="",this.pnErr=!1):(this.pnErrMsg="手机号码格式错误",this.pnErr=!0)},email:function(){this.checksEmail()?(this.emailErrMsg="",this.emailErr=!1):(this.emailErrMsg="邮箱格式错误",this.emailErr=!0)}}},_t=At,kt=(a("ac59"),Object(w["a"])(_t,Yt,wt,!1,null,null,null)),Et=kt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"订单"}}),a("van-cell-group",[a("van-cell",{attrs:{title:"火车票订单",value:"温馨提示"}})],1),a("van-tabbar",{staticClass:"o-tabbar",attrs:{"active-color":"#07c160"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"shop",to:"/order/unpaid"}},[t._v("待支付")]),a("van-tabbar-item",{attrs:{icon:"chat",to:"/order/paid",dot:""}},[t._v("已支付")]),a("van-tabbar-item",{attrs:{icon:"records",to:"/order/all",info:"5"}},[t._v("本人车票")])],1),a("van-cell-group",[a("van-cell",{attrs:{title:"餐饮･特产",icon:"location","is-link":""}}),a("van-cell",{attrs:{title:"保险订单",icon:"location","is-link":""}})],1)],1)},jt=[],yt={components:(l={},Object(C["a"])(l,U["a"].name,U["a"]),Object(C["a"])(l,L["a"].name,L["a"]),Object(C["a"])(l,ot["a"].name,ot["a"]),Object(C["a"])(l,it["a"].name,it["a"]),Object(C["a"])(l,g["a"].name,g["a"]),Object(C["a"])(l,b["a"].name,b["a"]),l),data:function(){return{active:-1}},mounted:function(){"order/unpaid"===this.$route.name&&(this.active=0),"order/paid"===this.$route.name&&(this.active=1),"order/all"===this.$route.name&&(this.active=2)}},Mt=yt,xt=(a("0eb0"),Object(w["a"])(Mt,Ot,jt,!1,null,null,null)),Dt=xt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail"},[a("van-nav-bar",{attrs:{title:"商旅"}}),a("van-swipe",{staticClass:"banner-show",attrs:{autoplay:3e3}},t._l(t.slistsBanner,function(t,e){return a("van-swipe-item",{key:e},[a("img",{staticClass:"banner-img",attrs:{src:t.img}})])}),1),t._l(t.tlists,function(t,e){return a("travel-item",{key:e,attrs:{img:t.img,start:t.start,title:t.title,price:t.price,src:t.src}})}),a("div",{staticClass:"stand"},[t._v(" ")])],2)},St=[],Ut=(a("3354"),a("e6b5")),Bt=(a("a4e7"),a("895c")),Lt=a("c1f9"),$t=a.n(Lt),Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"travel-item",on:{click:t.showURL}},[a("div",{staticClass:"ti-img"},[a("img",{attrs:{src:t.img}})]),a("div",{staticClass:"ti-info"},[a("div",[t._v(t._s(t.title))]),a("div",[a("van-tag",{attrs:{color:"#42b983"}},[t._v(t._s(t.start))])],1),a("div",[a("van-tag",{attrs:{color:"#f2826a"}},[t._v(t._s(t.price)+"¥")])],1)])])},It=[],Rt=a("3bf0"),Jt=a.n(Rt),Kt={name:"TravelItem",components:Object(C["a"])({},z["a"].name,z["a"]),props:{src:String,title:String,price:String,img:String,start:String},methods:{showURL:function(){this.$router.push({name:"mailitem",params:{id:Jt.a.encode(this.src)}})}}},Ft=Kt,Qt=(a("e59d"),Object(w["a"])(Ft,Vt,It,!1,null,null,null)),Ht=Qt.exports,Wt={components:(u={},Object(C["a"])(u,U["a"].name,U["a"]),Object(C["a"])(u,L["a"].name,L["a"]),Object(C["a"])(u,Bt["a"].name,Bt["a"]),Object(C["a"])(u,Ut["a"].name,Ut["a"]),Object(C["a"])(u,"TravelItem",Ht),u),mounted:function(){this.getTravelList(),this.getServiceList()},methods:{getTravelList:function(){var t=this;fetch("https://www.12306.cn/index/otn/index12306/getTravelList").then(function(e){e.json().then(function(t){return t.data.index_travel_url}).then(function(e){t.tlists=e})})},getServiceList:function(){var t=this;fetch("https://www.12306.cn/index/otn/index12306/getServiceList").then(function(e){e.json().then(function(t){return t.data}).then(function(e){t.slistsBanner=$t.a.filter($t.a.values(e),"target"),t.slistsList=$t.a.filter($t.a.values(e),"notice")})})}},data:function(){return{tlists:[],slistsBanner:[],slistsList:[]}}},qt=Wt,zt=(a("89b6"),Object(w["a"])(qt,Tt,St,!1,null,null,null)),Pt=zt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"announcement"},[a("van-nav-bar",{attrs:{title:"公告"}}),a("van-cell-group",{staticClass:"announcement-group"},t._l(t.announcements,function(e,n){return a("van-cell",{key:n,attrs:{title:e.title,value:e.date,"is-link":""},on:{click:function(e){return t.showURL(n)}}})}),1)],1)},Xt=[],Zt={components:(h={},Object(C["a"])(h,U["a"].name,U["a"]),Object(C["a"])(h,L["a"].name,L["a"]),Object(C["a"])(h,ot["a"].name,ot["a"]),Object(C["a"])(h,it["a"].name,it["a"]),h),methods:{getAnnouncements:function(){var t=this;fetch("https://www.12306.cn/index/otn/index12306/getNews").then(function(e){e.json().then(function(t){return t.data.index_news_list}).then(function(e){t.announcements=e})})},showURL:function(t){this.$router.push({name:"announcementitem",params:{id:Jt.a.encode(this.announcements[t].src)}})}},data:function(){return{announcements:[]}},mounted:function(){this.getAnnouncements()}},te=Zt,ee=(a("e0d8"),Object(w["a"])(te,Gt,Xt,!1,null,null,null)),ae=ee.exports;d["a"].use(y["a"]);var ne=new y["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:J},{path:"/login",name:"login",component:Nt},{path:"/register",name:"register",component:Et},{path:"/search",name:"search",component:nt},{path:"/mail",name:"mail",component:Pt},{path:"/order",name:"order",component:Dt},{path:"/order/:type",name:"orderitem",component:function(){return a.e("chunk-2d0cb782").then(a.bind(null,"4a98"))}},{path:"/announcement",name:"announcement",component:ae},{path:"/about",name:"about",component:dt}]});d["a"].use(ct["a"]);var se=new ct["a"].Store({state:{user:{}},mutations:{setUser:function(t,e){t.user=e,localStorage.trainTicketJWT=e.token},deleteUser:function(t){t.user=null,localStorage.removeItem("trainTicketJWT")}},actions:{setUserAction:function(t,e){var a=t.commit;a("setUser",e)},deleteUserAction:function(t){var e=t.commit;e("deleteUser")}}}),re=a("8235"),ie=a.n(re),oe={baseURL:"http://localhost:3000/api"};d["a"].prototype.$axios=H.a.create(oe),d["a"].prototype.$axios.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("trainTicketJWT")),d["a"].config.productionTip=!1,new d["a"]({router:ne,store:se,render:function(t){return t(j)},mounted:function(){if(localStorage.trainTicketJWT){var t=ie()(localStorage.trainTicketJWT),e={username:t.username,email:t.email,phone_number:t.phone_number,id_no:t.id_no,role:t.role,token:localStorage.trainTicketJWT};se.dispatch("setUserAction",e),this.$router.push("login"===this.$router.currentRoute.name?"home":this.$router.currentRoute.path)}localStorage.trainTicketJWT||this.$router.push("login")}}).$mount("#app")},5789:function(t,e,a){},"5f53":function(t,e,a){},"88d0":function(t,e,a){"use strict";var n=a("f09b"),s=a.n(n);s.a},"89b6":function(t,e,a){"use strict";var n=a("df3f"),s=a.n(n);s.a},"89f1":function(t,e,a){"use strict";var n=a("5f53"),s=a.n(n);s.a},"9e74":function(t,e,a){},a29c:function(t,e,a){},ac59:function(t,e,a){"use strict";var n=a("a29c"),s=a.n(n);s.a},cbfa:function(t,e,a){},d096:function(t,e,a){},da41:function(t,e,a){"use strict";var n=a("e732"),s=a.n(n);s.a},df3f:function(t,e,a){},e0d8:function(t,e,a){"use strict";var n=a("cbfa"),s=a.n(n);s.a},e59d:function(t,e,a){"use strict";var n=a("2027"),s=a.n(n);s.a},e732:function(t,e,a){},f09b:function(t,e,a){},f5ed:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACBFBMVEUAAABCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYNCuYMAAAAK8R2KAAAAqnRSTlMAKnKTrcji+wI7i9oBWNxEzBS23krxZ/zntYRUJFWF6Ftd35sGcZ/hDv5ClAonKDyA2P2DCAwa0dnQp052eYaycLHgwPC+7qDOdJ72QY3193oEIm6Zt7gjB3u51aI2pCzUgS0LXgmO7BES7YfWeHd+T9fN+ZYVEOVlJjUxkjPHmDQ3mnMvycNg+mhql78yid09OTiKiILSBcZ8zykuK/jLA8L0a8QeUCDyZvFZcFEAAAABYktHRACIBR1IAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4gwFDRIgLjTOUgAABMNJREFUeNrtm/lbE0cYxyd3QhJOOaRArTcahKSooFLRehQvinhEsFVqpYd41ROtZ7Wl9Whtq3hrW8/5K03Ymc0iu/u+E2Z3nqfPvr9ln3e+3082szO72fclZGr4/IFgKByhEiMSDgUDfh+BIxorict0nhzxkljU1j6RLHXOXYvSZMLav6zcaft8lJdZ2FdUumGfj8oKM39flVv+lFaZTMcZ1e75U1o9433/mlo3/SmtrXnv+7vsnyOYdA58rp5/LaoN86DCxflXiKrCteDa9Tc5KvX1R40/pWxFSriy/plFubYqJ1X5U5qc2P8c33+sozS/N8aQyXUz6z9osNnJ9B21obGp8kOkaCw3oASVWTUL4W24rfhoNkq2JJeLuv+YM1fEPh9z52B047lFEJM3T9Q+H/Mwyj7iR2TNL8afkPkIaT8JwEkLFhYHsHABrB0gQTCneVFx/oQsagbFgyQE5iw2SKZalgDRkjKkLwbFQyQM5rTqE7stnYFPaib9cTsf0Qpmhwn4/NG8lKktWw67axFfwoYsBX+DCAHVOvjXEdi0O/my0QGmwgArmNZKvD+lq9igFRIAupjWJyIAq9mgLgkA3UxrjQjAWjaoWyLApyIA6zwAD8AD8AA8AA/g/wiwXgRggwMAG0UAPnMAoEcEYJMDAA2b8f7NWxwAQIjpsRU/RgAg0b0NZ9/7eZ8jAIRs79+xcxcQO3f07y6MkAwgHh6AB+ABeAAegAfgAXgAHoBcgOyegbrBvV/YGca+HKwb2NPuDMC+/ROfI13W/kNaFcDgV04AHNBfxM2y8v+aZ5QedABgWD/yzbfm/t99r6cccgDA8IZ3pTmA4Q/9EYkAhzUp48uPNnOAtkJG5oB26IgEgL2aVMoAcNQc4KgBgE0C+JkeBuic+hMcMwc4Vsg4zg79IAHgBHvSPKkfqT5lDnCqUAozrB2Jwo/0MADdp4mdPsMPnLW6DM/yjLXsTdsorI4AOMnkz6UnPkbqiWU0aQvRyHn2+UcpAJkLTC7bE0xfvHSZ2MSVq6F08Kcs+3QNUR6FAKDX7YsQreNnhDgGgNYU5/8LRhsFMPZrMf6/oapSUQC5idgnat93A6eMBKA3W8T8b2H/WMUC5Db5+ltY98u3f0fL4gFyu3wK558SKY0SAMj8gT0DrYg6hyIAhvEzYKsTAB0H8QDtafkAmTsiF8Gf6BpVNMBfIv6E/C0bYCQrBpDdLxeg9hwTjjYmbaORb1wXkO0BSIAm/s3ACjW97u2uTIB7vCxnFLzH2jzKUsc75QFE+B1O9D6cfJ//CNfGpAG08dOKenHVw7MfyAJ4OM4UH/ViJHsfsfQ+TL0wAuDEYyaYGFiHigFefvrkKQIAvloeiK0AxoCfzCJwOd8z4ZuhQjy/CKmHwYLGp0+K9yekBbpsQ2BJ55Hp+MMLVxAqag09nx5A9B97/QBQ1tsreC86NXb/a2vgBwqb/dP1J+Q/WwOffWn3C76svnwlHC/Z0ITdDXqc2Ba3b2tgIuMPqXDo6+frN9ZJ+eJ2m/L+fn4ah8T9KR3io99a5+TL+5U3OChv8VDf5KK8zUd9o5P6Vi/lzW7q2/3UNzyqb/lU3/Sqvu2XKG98Jupbv4ny5nc2Hd1s/38HAeK7sXMSimsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMTItMDVUMTM6MTg6MzIrMDE6MDD7gPpNAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTEyLTA1VDEzOjE4OjMyKzAxOjAwit1C8QAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="}});
//# sourceMappingURL=app.b0b81db1.js.map